---
builders:
  - type: vagrant
    communicator: ssh
provisioners:
 # Note
 # ====
 # We run `sudo bash` here in order to preserve the exported
 # environment variable we set in the script. This ENV var is
 # required for non-interactive installs of `dpkg`, and it is
 # hard(er) and more uncertain to propagate with sudo.
 #
 # Everything else runs noramlly, without priviledges, in the
 # following provision blocks.
 #
  - type: shell
    inline: |
      sudo bash -x -c '
        export DEBIAN_FRONTEND=noninteractive &&
        apt-get update &&
        apt-get upgrade --yes </dev/null | tee /dev/null &&
        apt-get install --yes vim fish tmux curl docker-ce </dev/null | tee /dev/null &&
        true
      '
